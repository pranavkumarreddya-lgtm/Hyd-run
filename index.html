<!DOCTYPE html>
<html>
<head>
  <title>Hyd Runner</title>
</head>
<body>

<h1 style="text-align:center;">Hyd Runner üèÉ</h1>

<div id="game" style="width:300px;height:400px;border:2px solid black;margin:auto;position:relative;overflow:hidden;background:lightblue;">
  
  <div id="player"
       style="width:40px;height:40px;background:red;position:absolute;bottom:10px;left:130px;">
  </div>

  <div id="obstacle"
       style="width:40px;height:40px;background:black;position:absolute;top:-40px;left:130px;">
  </div>

</div>

<script>

let player = document.getElementById("player");
let obstacle = document.getElementById("obstacle");

let obstacleTop = -40;
let jumping = false;
let gameOver = false;

function gameLoop(){

  if(gameOver) return;

  obstacleTop += 4;
  obstacle.style.top = obstacleTop + "px";

  if(obstacleTop > 400){
    obstacleTop = -40;
  }

  let playerRect = player.getBoundingClientRect();
  let obstacleRect = obstacle.getBoundingClientRect();

  if (
    playerRect.left < obstacleRect.right &&
    playerRect.right > obstacleRect.left &&
    playerRect.top < obstacleRect.bottom &&
    playerRect.bottom > obstacleRect.top
  ) {
    gameOver = true;
    alert("Game Over üò≠");
    location.reload(); // clean restart
    return;
  }

  requestAnimationFrame(gameLoop);
}

gameLoop();


function jump(){
  if(jumping || gameOver) return;

  jumping = true;
  let position = 10;

  let up = setInterval(function(){
    if(position >= 150){
      clearInterval(up);

      let down = setInterval(function(){
        if(position <= 10){
          clearInterval(down);
          jumping = false;
        }
        position -= 5;
        player.style.bottom = position + "px";
      }, 20);

    }
    position += 5;
    player.style.bottom = position + "px";
  }, 20);
}

document.addEventListener("click", jump);

</script>

</body>
</html>
